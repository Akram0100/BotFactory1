{% extends "base.html" %}
{% block title %}{{ post.title }} — Blog | BotFactory AI{% endblock %}
{% block og_title %}{{ post.title }} — BotFactory AI{% endblock %}
{% block og_description %}{{ post.description }}{% endblock %}
{% block content %}
<div class="container py-4">
  <nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{{ url_for('main.index') }}">Bosh sahifa</a></li>
      <li class="breadcrumb-item"><a href="{{ url_for('main.blog_index') }}">Blog</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{ post.title }}</li>
    </ol>
  </nav>

  <article class="card shadow-sm">
    <div class="card-body">
      <h1 class="mb-2">{{ post.title }}</h1>
      <p class="text-muted">{{ post.description }}</p>
      <hr>
      <div class="blog-content">
        {{ post_html | safe }}
      </div>
    </div>
  </article>

  {% if related %}
  <section class="mt-4">
    <h3 class="h5"><i class="fas fa-link me-1"></i>Tegishli maqolalar</h3>
    <ul class="list-unstyled ms-1">
      {% for r in related %}
      <li class="mb-1">
        <a href="{{ url_for('main.blog_post', slug=r.slug) }}" class="text-decoration-none">
          {{ r.title }}
        </a>
      </li>
      {% endfor %}
    </ul>
  </section>
  {% endif %}
</div>

<!-- JSON-LD: Article -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ post.title|e }}",
  "description": "{{ post.description|e }}",
  "datePublished": "{{ published }}",
  "dateModified": "{{ modified }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ request.base_url }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "BotFactory AI",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ url_for('static', filename='images/favicon.png', _external=True) }}"
    }
  }
}
</script>

<!-- JSON-LD: BreadcrumbList -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Bosh sahifa",
      "item": "{{ url_for('main.index', _external=True) }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Blog",
      "item": "{{ url_for('main.blog_index', _external=True) }}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ post.title|e }}",
      "item": "{{ request.base_url }}"
    }
  ]
}
</script>
{% endblock %}
